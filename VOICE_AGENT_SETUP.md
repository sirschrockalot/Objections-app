# Voice Practice Mode Setup Guide

## Overview
Voice Practice Mode allows users to practice objection handling through real-time voice conversations with an ElevenLabs AI agent. This provides a realistic, interactive training experience without needing real buyers.

## Prerequisites

1. **ElevenLabs Account**
   - Sign up at [elevenlabs.io](https://elevenlabs.io)
   - Get your API key from the dashboard
   - Create a Conversational AI agent

2. **Browser Requirements**
   - Modern browser (Chrome, Firefox, Safari, Edge)
   - Microphone access permissions
   - HTTPS connection (required for microphone access)

## Setup Instructions

### Step 1: Create an ElevenLabs Agent

1. Log in to your ElevenLabs account
2. Navigate to the **Agents** section
3. Click **Create New Agent**
4. Configure your agent:
   - **Name**: "Real Estate Objection Trainer" (or your preference)
   - **System Prompt**: 
     ```
     You are a realistic potential real estate buyer practicing objections with a disposition agent. 
     Present common objections naturally and conversationally. After the agent responds, provide 
     follow-up questions or push back on weak points. Be realistic but fair - acknowledge good 
     responses. Keep conversations natural and flowing.
     ```
   - **Voice**: Choose a professional, conversational voice
   - **Language**: English (or your preferred language)
5. Save the agent and copy its **Agent ID**

### Step 2: Configure Environment Variables

1. Copy `.env.example` to `.env.local`:
   ```bash
   cp .env.example .env.local
   ```

2. Edit `.env.local` and add your credentials:
   ```env
   NEXT_PUBLIC_ELEVENLABS_API_KEY=your_api_key_here
   NEXT_PUBLIC_ELEVENLABS_AGENT_ID=your_agent_id_here
   ```

3. Restart your development server:
   ```bash
   npm run dev
   ```

### Step 3: Test the Feature

1. Open the app in your browser
2. Click on **Voice Practice** mode
3. Click **Connect & Start**
4. Grant microphone permissions when prompted
5. Start speaking - the agent will respond!

## Using Voice Practice Mode

### Starting a Session

1. Select **Voice Practice** from the practice mode options
2. Click **Connect & Start** to establish connection
3. Wait for the connection status to show "Connected"
4. The agent will begin the conversation

### During a Session

- **Speak naturally**: The agent will transcribe your speech in real-time
- **Listen to responses**: The agent will speak its responses
- **View transcript**: See the conversation history in real-time
- **Pause**: Click **Pause** to temporarily stop
- **Resume**: Click **Resume** to continue
- **End Session**: Click **End Session** to finish

### Session Features

- **Real-time transcription**: See what you and the agent say
- **Audio playback**: Hear the agent's responses
- **Session metrics**: Track duration, messages exchanged
- **Points & achievements**: Earn points for completing sessions

## Troubleshooting

### "Configuration Required" Message

- Make sure you've set `NEXT_PUBLIC_ELEVENLABS_AGENT_ID` in `.env.local`
- Restart the development server after adding environment variables
- Check that the agent ID is correct in your ElevenLabs dashboard

### "Audio Not Supported" Message

- Use a modern browser (Chrome, Firefox, Safari, Edge)
- Ensure you're on HTTPS (required for microphone access)
- Check browser permissions for microphone access

### Connection Issues

- Check your internet connection
- Verify your ElevenLabs API key is valid
- Check browser console for error messages
- Ensure the agent ID is correct

### Microphone Not Working

- Grant microphone permissions in browser settings
- Check system microphone settings
- Try a different browser
- Ensure no other applications are using the microphone

### No Audio Playback

- Check system volume settings
- Ensure browser audio is not muted
- Try refreshing the page
- Check browser console for errors

## Best Practices

1. **Quiet Environment**: Practice in a quiet space for better speech recognition
2. **Clear Speech**: Speak clearly and at a moderate pace
3. **Natural Flow**: Respond naturally as you would in a real conversation
4. **Review Transcripts**: Review your responses after sessions to identify areas for improvement
5. **Regular Practice**: Use voice practice regularly to build confidence

## API Costs

ElevenLabs charges based on usage:
- **Free Tier**: Limited characters/minutes per month
- **Paid Tiers**: Pay-per-use or subscription

Monitor your usage in the ElevenLabs dashboard to manage costs.

## Security Notes

- API keys are exposed to the client (acceptable for MVP)
- For production, consider using a backend proxy to keep keys secure
- Never commit `.env.local` to version control

## Support

If you encounter issues:
1. Check the browser console for error messages
2. Verify environment variables are set correctly
3. Test with a simple conversation first
4. Review the ElevenLabs documentation for API updates

## Future Enhancements

Planned improvements:
- Advanced analytics and feedback
- Conversation scenarios
- Multi-language support
- Team features and sharing
- AI-powered response analysis

